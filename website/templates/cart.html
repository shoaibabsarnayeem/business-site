{% extends "base.html" %}
{% block content %}

<h2 class="fw-bold mb-4">Your Cart</h2>

{% if products %}
<table class="table table-bordered align-middle">
    <thead class="table-dark">
        <tr>
            <th>Product</th>
            <th style="width:180px;">Quantity</th>
            <th>Price (₹)</th>
            <th>Subtotal (₹)</th>
            <th>Action</th>
        </tr>
    </thead>

    <tbody>
    {% for p in products %}
        <tr>
            <td>{{ p.name }}</td>

            <!-- Quantity + / - -->
            <td class="text-center">
                <a href="{% url 'decrease_qty' p.id %}" class="btn btn-sm btn-secondary">−</a>
                <span class="mx-2 fw-bold">{{ p.qty }}</span>
                <a href="{% url 'increase_qty' p.id %}" class="btn btn-sm btn-secondary">+</a>
            </td>

            <td>{{ p.price }}</td>
            <td>{{ p.subtotal }}</td>

            <!-- Remove -->
            <td>
                <a href="{% url 'remove_from_cart' p.id %}" class="btn btn-danger btn-sm">
                    Remove
                </a>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<h4 class="mt-3">Total: ₹ {{ total }}</h4>

<!-- Checkout -->
<a href="{% url 'checkout' %}" class="btn btn-success btn-lg mt-3">
    Proceed to Payment
</a>

{% else %}
<p>Your cart is empty.</p>
{% endif %}

{% endblock %}